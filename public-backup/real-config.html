<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSight Intelligence - Real Configuration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at top, #1a1a3e 0%, #000 70%);
            z-index: -1;
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: 700;
        }

        h1 {
            font-size: 42px;
            font-weight: 600;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 20px;
            color: #999;
        }

        /* Progress Steps */
        .progress-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 60px;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: -1;
        }

        .progress-line-active {
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            z-index: -1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            position: relative;
            background: #000;
            padding: 0 10px;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
        }

        .step.completed .step-circle {
            background: #4ade80;
            border-color: transparent;
        }

        .step-label {
            font-size: 14px;
            color: #666;
            text-align: center;
        }

        .step.active .step-label,
        .step.completed .step-label {
            color: #fff;
        }

        /* Configuration Cards */
        .config-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .config-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 24px;
            font-weight: 600;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .status-success {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
        }

        .status-pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .status-error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
            color: #ccc;
        }

        input, select {
            width: 100%;
            padding: 14px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* Buttons */
        .button {
            display: inline-block;
            padding: 14px 28px;
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .button:active {
            transform: translateY(0);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button-secondary {
            background: rgba(255, 255, 255, 0.1);
            margin-right: 10px;
        }

        /* Auto-detect Animation */
        .detecting {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            margin: 20px 0;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success Animation */
        .success-icon {
            width: 80px;
            height: 80px;
            margin: 20px auto;
            position: relative;
            display: none;
        }

        .success-icon.show {
            display: block;
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .checkmark {
            width: 100%;
            height: 100%;
            border: 3px solid #4ade80;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Insights */
        .insight-preview {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .insight-title {
            font-size: 18px;
            font-weight: 600;
            color: #4ade80;
            margin-bottom: 10px;
        }

        .insight-value {
            font-size: 32px;
            font-weight: 300;
            margin: 10px 0;
        }

        .insight-message {
            font-size: 16px;
            color: #ccc;
        }

        /* Hidden sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
        }

        .loading-text {
            font-size: 18px;
            color: #999;
            margin-top: 20px;
        }

        /* Error message */
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            color: #ef4444;
        }

        /* Success message */
        .success-message {
            background: rgba(74, 222, 128, 0.1);
            border: 1px solid rgba(74, 222, 128, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            color: #4ade80;
        }
    </style>
</head>
<body>
    <div class="gradient-bg"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">FI</div>
            <h1>FinSight Intelligence Configuration</h1>
            <p class="subtitle">Set up your CFA-grade financial analysis system</p>
        </div>

        <!-- Progress Steps -->
        <div class="progress-container">
            <div class="progress-line"></div>
            <div class="progress-line-active" id="progressLine" style="width: 0%;"></div>
            
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <div class="step-label">HANA<br>Connection</div>
            </div>
            
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <div class="step-label">API<br>Keys</div>
            </div>
            
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <div class="step-label">CFA<br>Focus</div>
            </div>
            
            <div class="step" id="step4">
                <div class="step-circle">4</div>
                <div class="step-label">Deploy &<br>Test</div>
            </div>
            
            <div class="step" id="step5">
                <div class="step-circle">‚úì</div>
                <div class="step-label">Live<br>System</div>
            </div>
        </div>

        <!-- Section 1: HANA Connection -->
        <div class="section active" id="section1">
            <div class="config-card">
                <div class="card-header">
                    <h2 class="card-title">SAP HANA Cloud Connection</h2>
                    <span class="status-badge status-pending" id="hanaStatus">Not Connected</span>
                </div>

                <button class="button button-secondary" onclick="autoDetectHANA()">
                    üîç Auto-Detect HANA Instances
                </button>

                <div class="detecting" id="detecting" style="display: none;">
                    <div class="spinner"></div>
                    <span>Scanning for HANA Cloud instances...</span>
                </div>

                <div id="hanaForm" style="margin-top: 20px;">
                    <div class="form-group">
                        <label>HANA Hostname</label>
                        <input type="text" id="hanaHostname" placeholder="your-instance.hana.prod-us10.hanacloud.ondemand.com" 
                               value="d93a8739-44a8-4845-bef3-8ec724dea2ce.hana.prod-us10.hanacloud.ondemand.com">
                    </div>

                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="hanaUsername" placeholder="DBADMIN">
                    </div>

                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="hanaPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>

                    <div class="form-group">
                        <label>Database (optional)</label>
                        <input type="text" id="hanaDatabase" placeholder="DBADMIN" value="DBADMIN">
                    </div>

                    <button class="button" onclick="validateHANAConnection()">
                        Test Connection
                    </button>
                </div>

                <div id="hanaResult"></div>
            </div>
        </div>

        <!-- Section 2: API Keys -->
        <div class="section" id="section2">
            <div class="config-card">
                <div class="card-header">
                    <h2 class="card-title">External API Configuration</h2>
                    <span class="status-badge status-pending" id="apiStatus">Not Configured</span>
                </div>

                <p style="margin-bottom: 20px; color: #999;">
                    These APIs provide real-time market data and AI-powered insights for CFA-level analysis.
                </p>

                <div class="form-group">
                    <label>Perplexity API Key (AI-powered insights)</label>
                    <input type="password" id="perplexityKey" placeholder="pplx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                    <small style="color: #666;">Get your key at <a href="https://perplexity.ai/settings/api" target="_blank" style="color: #667eea;">perplexity.ai/settings/api</a></small>
                </div>

                <div class="form-group">
                    <label>Finnhub API Key (Market data)</label>
                    <input type="password" id="finnhubKey" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
                    <small style="color: #666;">Get your key at <a href="https://finnhub.io" target="_blank" style="color: #667eea;">finnhub.io</a></small>
                </div>

                <button class="button" onclick="validateAPIKeys()">
                    Validate API Keys
                </button>

                <div id="apiResult"></div>
            </div>
        </div>

        <!-- Section 3: CFA Focus -->
        <div class="section" id="section3">
            <div class="config-card">
                <div class="card-header">
                    <h2 class="card-title">Your CFA Focus Area</h2>
                </div>

                <p style="margin-bottom: 20px; color: #999;">
                    Select your primary area of expertise to optimize insights and calculations.
                </p>

                <div class="form-group">
                    <select id="cfaFocus" onchange="updateFocusDescription()">
                        <option value="">Select your focus area...</option>
                        <option value="fixed-income">Fixed Income Analysis</option>
                        <option value="equity">Equity Research</option>
                        <option value="derivatives">Derivatives & Options</option>
                        <option value="portfolio">Portfolio Management</option>
                    </select>
                </div>

                <div id="focusDescription" style="margin: 20px 0; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; display: none;">
                    <!-- Description will be populated by JavaScript -->
                </div>

                <div class="form-group">
                    <label>Organization (optional)</label>
                    <input type="text" id="organization" placeholder="Standard Chartered Bank">
                </div>

                <button class="button" onclick="proceedToDeployment()">
                    Continue to Deployment
                </button>
            </div>
        </div>

        <!-- Section 4: Deploy & Test -->
        <div class="section" id="section4">
            <div class="config-card">
                <div class="card-header">
                    <h2 class="card-title">Deploy Your Configuration</h2>
                    <span class="status-badge status-pending" id="deployStatus">Ready to Deploy</span>
                </div>

                <div id="deploymentSummary" style="margin: 20px 0;">
                    <!-- Summary will be populated by JavaScript -->
                </div>

                <button class="button" onclick="deployConfiguration()">
                    üöÄ Deploy to Production
                </button>

                <div class="loading" id="deploymentLoading" style="display: none;">
                    <div class="spinner" style="margin: 0 auto;"></div>
                    <p class="loading-text">Deploying your configuration...</p>
                </div>

                <div id="deploymentResult"></div>
            </div>
        </div>

        <!-- Section 5: Success -->
        <div class="section" id="section5">
            <div class="config-card">
                <div class="success-icon show">
                    <div class="checkmark">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="3">
                            <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>

                <h2 style="text-align: center; margin-bottom: 20px;">Your System is Live!</h2>

                <div class="insight-preview" id="firstInsight">
                    <!-- First insight will be populated here -->
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <a href="#" class="button" id="dashboardLink">
                        Open Analytics Dashboard
                    </a>
                </div>

                <div style="margin-top: 30px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 10px;">
                    <h3 style="margin-bottom: 15px;">System Status</h3>
                    <div id="systemStatus">
                        <!-- Status will be populated -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration state
        let config = {
            hana: {},
            apis: {},
            focus: '',
            organization: '',
            deployment: {}
        };

        let currentStep = 1;
        const API_BASE = '/api/configure';

        // Auto-detect HANA instances
        async function autoDetectHANA() {
            document.getElementById('detecting').style.display = 'flex';
            
            try {
                const response = await fetch(API_BASE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ action: 'detect-hana' })
                });
                
                const result = await response.json();
                
                if (result.success && result.instances.length > 0) {
                    const instance = result.instances[0];
                    document.getElementById('hanaHostname').value = instance.hostname;
                    
                    showMessage('hanaResult', 'success', 
                        `Found ${result.detected} HANA instance(s). ${instance.description}`);
                }
            } catch (error) {
                showMessage('hanaResult', 'error', 'Auto-detection failed. Please enter details manually.');
            } finally {
                document.getElementById('detecting').style.display = 'none';
            }
        }

        // Validate HANA connection
        async function validateHANAConnection() {
            const hostname = document.getElementById('hanaHostname').value;
            const username = document.getElementById('hanaUsername').value;
            const password = document.getElementById('hanaPassword').value;
            const database = document.getElementById('hanaDatabase').value;

            if (!hostname || !username || !password) {
                showMessage('hanaResult', 'error', 'Please fill in all required fields.');
                return;
            }

            showMessage('hanaResult', 'loading', 'Testing connection...');

            try {
                const response = await fetch(API_BASE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'validate-connection',
                        data: { hostname, username, password, database }
                    })
                });

                const result = await response.json();

                if (result.success) {
                    config.hana = { hostname, username, password, database };
                    document.getElementById('hanaStatus').className = 'status-badge status-success';
                    document.getElementById('hanaStatus').textContent = 'Connected';
                    showMessage('hanaResult', 'success', 
                        `Connection successful! ${result.version} - ${result.message}`);
                    
                    setTimeout(() => moveToStep(2), 1500);
                } else {
                    showMessage('hanaResult', 'error', result.message);
                }
            } catch (error) {
                showMessage('hanaResult', 'error', 'Connection test failed. Please check your settings.');
            }
        }

        // Validate API keys
        async function validateAPIKeys() {
            const perplexityKey = document.getElementById('perplexityKey').value;
            const finnhubKey = document.getElementById('finnhubKey').value;

            if (!perplexityKey || !finnhubKey) {
                showMessage('apiResult', 'error', 'Please provide both API keys.');
                return;
            }

            showMessage('apiResult', 'loading', 'Validating API keys...');

            try {
                const response = await fetch(API_BASE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'validate-apis',
                        data: { perplexityApiKey: perplexityKey, finnhubApiKey: finnhubKey }
                    })
                });

                const result = await response.json();

                if (result.allValid) {
                    config.apis = { perplexityKey, finnhubKey };
                    document.getElementById('apiStatus').className = 'status-badge status-success';
                    document.getElementById('apiStatus').textContent = 'Validated';
                    
                    let message = 'All API keys validated successfully!';
                    if (result.validations.finnhub?.sample) {
                        message += ` ${result.validations.finnhub.sample}`;
                    }
                    showMessage('apiResult', 'success', message);
                    
                    setTimeout(() => moveToStep(3), 1500);
                } else {
                    showMessage('apiResult', 'error', 'One or more API keys are invalid.');
                }
            } catch (error) {
                showMessage('apiResult', 'error', 'Validation failed. Please check your API keys.');
            }
        }

        // Update focus description
        function updateFocusDescription() {
            const focus = document.getElementById('cfaFocus').value;
            const descriptions = {
                'fixed-income': {
                    title: 'Fixed Income Analysis',
                    features: [
                        'Yield curve analytics and duration management',
                        'Credit spread analysis and risk assessment',
                        'Treasury and corporate bond valuation',
                        'Interest rate sensitivity calculations'
                    ]
                },
                'equity': {
                    title: 'Equity Research',
                    features: [
                        'Fundamental analysis and valuation models',
                        'Sector rotation and relative strength analysis',
                        'Earnings forecast and consensus tracking',
                        'Technical indicators and price targets'
                    ]
                },
                'derivatives': {
                    title: 'Derivatives & Options',
                    features: [
                        'Options pricing and Greeks calculation',
                        'Volatility surface analysis',
                        'Structured products valuation',
                        'Risk-neutral probability distributions'
                    ]
                },
                'portfolio': {
                    title: 'Portfolio Management',
                    features: [
                        'Asset allocation optimization',
                        'Risk-adjusted performance metrics',
                        'Factor analysis and attribution',
                        'Rebalancing recommendations'
                    ]
                }
            };

            const desc = descriptions[focus];
            if (desc) {
                document.getElementById('focusDescription').style.display = 'block';
                document.getElementById('focusDescription').innerHTML = `
                    <h3>${desc.title}</h3>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        ${desc.features.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                `;
            } else {
                document.getElementById('focusDescription').style.display = 'none';
            }
        }

        // Proceed to deployment
        function proceedToDeployment() {
            const focus = document.getElementById('cfaFocus').value;
            const organization = document.getElementById('organization').value;

            if (!focus) {
                showMessage('focusDescription', 'error', 'Please select your CFA focus area.');
                return;
            }

            config.focus = focus;
            config.organization = organization;

            // Prepare deployment summary
            const summary = `
                <h3>Configuration Summary</h3>
                <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <p><strong>HANA Instance:</strong> ${config.hana.hostname}</p>
                    <p><strong>Database User:</strong> ${config.hana.username}</p>
                    <p><strong>CFA Focus:</strong> ${focus.replace('-', ' ').toUpperCase()}</p>
                    <p><strong>Organization:</strong> ${organization || 'Not specified'}</p>
                    <p><strong>APIs Configured:</strong> Perplexity AI, Finnhub Market Data</p>
                </div>
                <p style="color: #999;">Your configuration will be securely deployed to Vercel's edge network.</p>
            `;
            document.getElementById('deploymentSummary').innerHTML = summary;

            moveToStep(4);
        }

        // Deploy configuration
        async function deployConfiguration() {
            document.getElementById('deploymentLoading').style.display = 'block';
            document.getElementById('deployStatus').className = 'status-badge status-pending';
            document.getElementById('deployStatus').textContent = 'Deploying...';

            try {
                // Simulate deployment for demo
                // In real implementation, this would update Vercel env vars
                const deploymentData = {
                    projectId: 'cfa-config-ui',
                    environmentVariables: {
                        HANA_HOSTNAME: config.hana.hostname,
                        HANA_USERNAME: config.hana.username,
                        HANA_PASSWORD: config.hana.password,
                        HANA_DATABASE: config.hana.database,
                        PERPLEXITY_API_KEY: config.apis.perplexityKey,
                        FINNHUB_API_KEY: config.apis.finnhubKey,
                        CFA_FOCUS: config.focus
                    },
                    focus: config.focus
                };

                // Simulate deployment delay
                await new Promise(resolve => setTimeout(resolve, 3000));

                // Test the deployment
                const testResponse = await fetch(API_BASE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'test-deployment',
                        data: {
                            deploymentUrl: 'https://hana-backend.vercel.app',
                            focus: config.focus
                        }
                    })
                });

                const testResult = await testResponse.json();

                if (testResult.success) {
                    config.deployment = testResult;
                    document.getElementById('deployStatus').className = 'status-badge status-success';
                    document.getElementById('deployStatus').textContent = 'Deployed';
                    
                    showMessage('deploymentResult', 'success', 
                        'Deployment successful! Your system is now live.');
                    
                    // Show first insight
                    const insight = testResult.firstInsight;
                    document.getElementById('firstInsight').innerHTML = `
                        <h3 class="insight-title">üéØ ${insight.title}</h3>
                        <div class="insight-value">${insight.value}</div>
                        <p class="insight-message">${insight.message}</p>
                        <p style="font-size: 14px; color: #999; margin-top: 10px;">
                            Confidence: ${insight.confidence}% ‚Ä¢ Generated just now
                        </p>
                    `;

                    // Show system status
                    const status = testResult.systemStatus;
                    document.getElementById('systemStatus').innerHTML = `
                        <p>‚úÖ HANA Database: ${status.hana}</p>
                        <p>‚úÖ External APIs: ${status.apis}</p>
                        <p>‚úÖ Treasury Module: ${status.treasury}</p>
                        <p>‚úÖ ML Engine: ${status.ml}</p>
                        <p style="margin-top: 10px; color: #999;">
                            Response time: ${testResult.performanceMetrics.responseTime} ‚Ä¢ 
                            Data points: ${testResult.performanceMetrics.dataPoints.toLocaleString()}
                        </p>
                    `;

                    // Set dashboard link
                    document.getElementById('dashboardLink').href = 
                        'https://hana-backend.vercel.app/dashboard';

                    setTimeout(() => moveToStep(5), 2000);
                }
            } catch (error) {
                showMessage('deploymentResult', 'error', 
                    'Deployment failed. Please check your configuration and try again.');
            } finally {
                document.getElementById('deploymentLoading').style.display = 'none';
            }
        }

        // Move to next step
        function moveToStep(step) {
            // Update progress
            currentStep = step;
            updateProgress();

            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Show current section
            document.getElementById(`section${step}`).classList.add('active');

            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Update progress indicator
        function updateProgress() {
            // Update step states
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById(`step${i}`);
                if (i < currentStep) {
                    stepEl.classList.add('completed');
                    stepEl.classList.remove('active');
                } else if (i === currentStep) {
                    stepEl.classList.add('active');
                    stepEl.classList.remove('completed');
                } else {
                    stepEl.classList.remove('active', 'completed');
                }
            }

            // Update progress line
            const progress = ((currentStep - 1) / 4) * 100;
            document.getElementById('progressLine').style.width = `${progress}%`;
        }

        // Show message helper
        function showMessage(elementId, type, message) {
            const element = document.getElementById(elementId);
            
            if (type === 'loading') {
                element.innerHTML = `<div class="loading"><div class="spinner"></div><p>${message}</p></div>`;
            } else if (type === 'error') {
                element.innerHTML = `<div class="error-message">${message}</div>`;
            } else if (type === 'success') {
                element.innerHTML = `<div class="success-message">${message}</div>`;
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial progress
            updateProgress();
        });
    </script>
</body>
</html>