/* 
 * Typography System with Variable Fonts
 * Apple-inspired typography using SF Pro and system fonts
 */

/* ========================================
   Font Loading & Fallbacks
   ======================================== */

/* System font stack with proper fallbacks */
@font-face {
  font-family: 'SF Pro Display';
  src: local('SF Pro Display'),
       local('SFProDisplay-Regular'),
       local('SF Pro Display Regular');
  font-weight: 100 900;
  font-display: swap;
  font-style: normal;
}

@font-face {
  font-family: 'SF Pro Text';
  src: local('SF Pro Text'),
       local('SFProText-Regular'),
       local('SF Pro Text Regular');
  font-weight: 100 900;
  font-display: swap;
  font-style: normal;
}

@font-face {
  font-family: 'SF Mono';
  src: local('SF Mono'),
       local('SFMono-Regular'),
       local('SF Mono Regular');
  font-weight: 100 900;
  font-display: swap;
  font-style: normal;
}

/* ========================================
   Base Typography Setup
   ======================================== */

html {
  font-size: 16px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

body {
  font-family: var(--font-family-system);
  font-size: var(--text-base);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  font-weight: var(--font-weight-regular);
  font-variation-settings: 'wght' 400;
}

/* ========================================
   Display Typography
   ======================================== */

.typography-display-1 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: clamp(48px, 8vw, 96px);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tighter);
  font-variation-settings: 'wght' 700, 'opsz' 48;
  color: var(--color-text-primary);
  margin: 0;
}

.typography-display-2 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: clamp(36px, 6vw, 72px);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tighter);
  font-variation-settings: 'wght' 700, 'opsz' 36;
  color: var(--color-text-primary);
  margin: 0;
}

.typography-display-3 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: clamp(28px, 5vw, 56px);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
  font-variation-settings: 'wght' 600, 'opsz' 28;
  color: var(--color-text-primary);
  margin: 0;
}

/* ========================================
   Heading Typography
   ======================================== */

.typography-h1,
h1 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: var(--text-4xl);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
  font-variation-settings: 'wght' 700, 'opsz' 36;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-6) 0;
}

.typography-h2,
h2 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: var(--text-3xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
  font-variation-settings: 'wght' 600, 'opsz' 30;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-5) 0;
}

.typography-h3,
h3 {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: var(--text-2xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-snug);
  letter-spacing: var(--letter-spacing-tight);
  font-variation-settings: 'wght' 600, 'opsz' 24;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-4) 0;
}

.typography-h4,
h4 {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-snug);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 600, 'opsz' 20;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-3) 0;
}

.typography-h5,
h5 {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-lg);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-snug);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 500, 'opsz' 18;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-3) 0;
}

.typography-h6,
h6 {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-base);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 500, 'opsz' 16;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-2) 0;
}

/* ========================================
   Body Typography
   ======================================== */

.typography-body-large {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-lg);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-relaxed);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 400, 'opsz' 18;
  color: var(--color-text-primary);
}

.typography-body,
p {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-base);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 400, 'opsz' 16;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-4) 0;
}

.typography-body-small {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 400, 'opsz' 14;
  color: var(--color-text-secondary);
}

.typography-caption {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-xs);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-snug);
  letter-spacing: var(--letter-spacing-wide);
  font-variation-settings: 'wght' 400, 'opsz' 12;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

/* ========================================
   Interface Typography
   ======================================== */

.typography-button {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-wide);
  font-variation-settings: 'wght' 600, 'opsz' 14;
  text-transform: none;
}

.typography-button-large {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-base);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 600, 'opsz' 16;
}

.typography-label {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-snug);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 500, 'opsz' 14;
  color: var(--color-text-secondary);
}

.typography-input {
  font-family: 'SF Pro Text', var(--font-family-system);
  font-size: var(--text-base);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-normal);
  letter-spacing: var(--letter-spacing-normal);
  font-variation-settings: 'wght' 400, 'opsz' 16;
}

/* ========================================
   Monospace Typography
   ======================================== */

.typography-code,
code {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: calc(var(--text-sm) * 0.95);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-normal);
  font-variation-settings: 'wght' 400;
  background: var(--color-background-secondary);
  padding: var(--space-0-5) var(--space-1);
  border-radius: var(--radius-sm);
  color: var(--color-text-primary);
}

.typography-pre,
pre {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-relaxed);
  font-variation-settings: 'wght' 400;
  background: var(--color-background-secondary);
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  overflow-x: auto;
  color: var(--color-text-primary);
  margin: var(--space-4) 0;
}

.typography-mono-large {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: var(--text-base);
  font-weight: var(--font-weight-regular);
  line-height: var(--line-height-normal);
  font-variation-settings: 'wght' 400;
  font-variant-numeric: tabular-nums;
}

/* ========================================
   Data Typography
   ======================================== */

.typography-numeric {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-medium);
  font-variant-numeric: tabular-nums;
  font-variation-settings: 'wght' 500;
  letter-spacing: var(--letter-spacing-normal);
}

.typography-currency {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-semibold);
  font-variant-numeric: tabular-nums;
  font-variation-settings: 'wght' 600;
  letter-spacing: var(--letter-spacing-normal);
}

.typography-percentage {
  font-family: 'SF Mono', var(--font-family-mono);
  font-size: var(--text-sm);
  font-weight: var(--font-weight-medium);
  font-variant-numeric: tabular-nums;
  font-variation-settings: 'wght' 500;
}

.typography-metric-value {
  font-family: 'SF Pro Display', var(--font-family-system);
  font-size: var(--text-3xl);
  font-weight: var(--font-weight-bold);
  font-variant-numeric: tabular-nums;
  font-variation-settings: 'wght' 700, 'opsz' 30;
  line-height: var(--line-height-tight);
  letter-spacing: var(--letter-spacing-tight);
}

/* ========================================
   Semantic Typography
   ======================================== */

.typography-success {
  color: var(--color-success);
}

.typography-warning {
  color: var(--color-warning);
}

.typography-error {
  color: var(--color-error);
}

.typography-info {
  color: var(--color-info);
}

.typography-muted {
  color: var(--color-text-secondary);
}

.typography-disabled {
  color: var(--color-text-disabled);
  opacity: 0.6;
}

/* ========================================
   Text Styling Utilities
   ======================================== */

.typography-weight-thin { 
  font-weight: var(--font-weight-thin);
  font-variation-settings: 'wght' 100;
}

.typography-weight-light { 
  font-weight: var(--font-weight-light);
  font-variation-settings: 'wght' 300;
}

.typography-weight-regular { 
  font-weight: var(--font-weight-regular);
  font-variation-settings: 'wght' 400;
}

.typography-weight-medium { 
  font-weight: var(--font-weight-medium);
  font-variation-settings: 'wght' 500;
}

.typography-weight-semibold { 
  font-weight: var(--font-weight-semibold);
  font-variation-settings: 'wght' 600;
}

.typography-weight-bold { 
  font-weight: var(--font-weight-bold);
  font-variation-settings: 'wght' 700;
}

.typography-weight-heavy { 
  font-weight: var(--font-weight-heavy);
  font-variation-settings: 'wght' 800;
}

.typography-weight-black { 
  font-weight: var(--font-weight-black);
  font-variation-settings: 'wght' 900;
}

/* Letter spacing utilities */
.typography-tracking-tighter { letter-spacing: var(--letter-spacing-tighter); }
.typography-tracking-tight { letter-spacing: var(--letter-spacing-tight); }
.typography-tracking-normal { letter-spacing: var(--letter-spacing-normal); }
.typography-tracking-wide { letter-spacing: var(--letter-spacing-wide); }
.typography-tracking-wider { letter-spacing: var(--letter-spacing-wider); }
.typography-tracking-widest { letter-spacing: var(--letter-spacing-widest); }

/* Line height utilities */
.typography-leading-tight { line-height: var(--line-height-tight); }
.typography-leading-snug { line-height: var(--line-height-snug); }
.typography-leading-normal { line-height: var(--line-height-normal); }
.typography-leading-relaxed { line-height: var(--line-height-relaxed); }
.typography-leading-loose { line-height: var(--line-height-loose); }

/* Text alignment */
.typography-text-left { text-align: left; }
.typography-text-center { text-align: center; }
.typography-text-right { text-align: right; }
.typography-text-justify { text-align: justify; }

/* Text transform */
.typography-uppercase { text-transform: uppercase; }
.typography-lowercase { text-transform: lowercase; }
.typography-capitalize { text-transform: capitalize; }
.typography-normal-case { text-transform: none; }

/* Text decoration */
.typography-underline { text-decoration: underline; }
.typography-line-through { text-decoration: line-through; }
.typography-no-underline { text-decoration: none; }

/* ========================================
   Responsive Typography
   ======================================== */

@media (max-width: 768px) {
  .typography-display-1 {
    font-size: clamp(32px, 8vw, 48px);
    font-variation-settings: 'wght' 700, 'opsz' 32;
  }
  
  .typography-display-2 {
    font-size: clamp(28px, 6vw, 36px);
    font-variation-settings: 'wght' 700, 'opsz' 28;
  }
  
  .typography-display-3 {
    font-size: clamp(24px, 5vw, 28px);
    font-variation-settings: 'wght' 600, 'opsz' 24;
  }
  
  .typography-h1 {
    font-size: var(--text-3xl);
    font-variation-settings: 'wght' 700, 'opsz' 30;
  }
  
  .typography-h2 {
    font-size: var(--text-2xl);
    font-variation-settings: 'wght' 600, 'opsz' 24;
  }
  
  .typography-metric-value {
    font-size: var(--text-2xl);
    font-variation-settings: 'wght' 700, 'opsz' 24;
  }
}

/* ========================================
   Dark Mode Typography
   ======================================== */

@media (prefers-color-scheme: dark) {
  html {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  
  .typography-code,
  .typography-pre {
    background: var(--color-background-secondary-dark);
  }
}

/* ========================================
   High Contrast Typography
   ======================================== */

@media (prefers-contrast: high) {
  .typography-muted {
    color: var(--color-text-primary);
  }
  
  .typography-caption {
    color: var(--color-text-secondary);
  }
  
  .typography-code,
  .typography-pre {
    background: transparent;
    border: 1px solid currentColor;
  }
}

/* ========================================
   Print Typography
   ======================================== */

@media print {
  html {
    font-size: 12pt;
  }
  
  .typography-display-1,
  .typography-display-2,
  .typography-display-3 {
    break-after: avoid;
  }
  
  h1, h2, h3, h4, h5, h6 {
    break-after: avoid;
    break-inside: avoid;
  }
  
  p {
    orphans: 3;
    widows: 3;
  }
  
  .typography-code,
  .typography-pre {
    background: transparent !important;
    border: 1px solid #ddd;
  }
}

/* ========================================
   Font Feature Settings
   ======================================== */

.typography-features-default {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

.typography-features-numeric {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "tnum" 1;
}

.typography-features-fractions {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "frac" 1;
}

.typography-features-ordinals {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "ordn" 1;
}

.typography-features-small-caps {
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "smcp" 1;
}

/* ========================================
   Optical Sizing Support
   ======================================== */

@supports (font-variation-settings: 'opsz' 16) {
  .typography-optical-auto {
    font-variation-settings: 'opsz' auto;
  }
}

/* Fallback for browsers without optical sizing */
@supports not (font-variation-settings: 'opsz' 16) {
  .typography-display-1,
  .typography-display-2,
  .typography-display-3 {
    font-family: 'SF Pro Display', var(--font-family-system);
  }
  
  .typography-body,
  .typography-body-large,
  .typography-body-small {
    font-family: 'SF Pro Text', var(--font-family-system);
  }
}