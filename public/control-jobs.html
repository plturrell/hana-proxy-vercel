<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control - FinSight Intelligence</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/@blueprintjs/core@4.20.2/lib/css/blueprint.css" rel="stylesheet">
  <link href="apple-hybrid-safe.css" rel="stylesheet">
  <style>
    /* Jobs/Ive Minimalist Design System */
    :root {
      --jobs-black: #000000;
      --jobs-white: #FFFFFF;
      --jobs-gray: #8E8E93;
      --jobs-light-gray: #F2F2F7;
      --jobs-blue: #007AFF;
      --jobs-green: #34C759;
      --jobs-red: #FF3B30;
      --jobs-orange: #FF9500;
      --jobs-purple: #AF52DE;
      
      --jobs-font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", sans-serif;
      --jobs-font-size-hero: 48px;
      --jobs-font-size-title: 34px;
      --jobs-font-size-headline: 28px;
      --jobs-font-size-body: 17px;
      --jobs-font-size-caption: 13px;
      
      --jobs-spacing-xs: 4px;
      --jobs-spacing-sm: 8px;
      --jobs-spacing-md: 16px;
      --jobs-spacing-lg: 24px;
      --jobs-spacing-xl: 32px;
      --jobs-spacing-xxl: 48px;
      
      --jobs-animation: cubic-bezier(0.25, 0.46, 0.45, 0.94);
      --jobs-duration: 300ms;
    }
    
    * {
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    body {
      margin: 0;
      font-family: var(--jobs-font);
      font-size: var(--jobs-font-size-body);
      color: var(--jobs-black);
      background: var(--jobs-white);
      line-height: 1.47;
      overflow-x: hidden;
    }
    
    body.dark-mode {
      background: var(--jobs-black);
      color: var(--jobs-white);
    }
    
    body.dark-mode .jobs-card {
      background: #1C1C1E;
      border-color: #38383A;
    }
    
    body.dark-mode .jobs-nav {
      background: rgba(0, 0, 0, 0.8);
      border-bottom-color: rgba(255, 255, 255, 0.1);
    }
    
    /* Dark mode tabbar styles - removed */
    
    body.dark-mode .jobs-system-card {
      background: #1C1C1E;
      border-color: #38383A;
    }
    
    body.dark-mode .jobs-system-card .jobs-status-indicator.online {
      background: var(--jobs-green);
    }
    
    body.dark-mode .jobs-system-card .jobs-status-indicator.warning {
      background: var(--jobs-orange);
    }
    
    body.dark-mode .jobs-system-card .jobs-status-indicator.error {
      background: var(--jobs-red);
    }
    
    /* Navigation with Hamburger */
    .jobs-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 48px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 0.5px solid rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--jobs-spacing-lg);
    }
    
    .jobs-hamburger {
      background: none;
      border: none;
      padding: var(--jobs-spacing-xs);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 3px;
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    .jobs-hamburger-line {
      width: 18px;
      height: 2px;
      background: var(--jobs-black);
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    body.dark-mode .jobs-hamburger-line {
      background: var(--jobs-white);
    }
    
    .jobs-hamburger.active .jobs-hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    
    .jobs-hamburger.active .jobs-hamburger-line:nth-child(2) {
      opacity: 0;
    }
    
    .jobs-hamburger.active .jobs-hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }
    
    /* Side Menu */
    .jobs-sidebar {
      position: fixed;
      top: 48px;
      left: -280px;
      width: 280px;
      height: calc(100vh - 48px);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-right: 1px solid rgba(0, 0, 0, 0.1);
      z-index: 999;
      transition: left var(--jobs-duration) var(--jobs-animation);
      overflow-y: auto;
      padding: var(--jobs-spacing-lg);
    }
    
    .jobs-sidebar.open {
      left: 0;
    }
    
    body.dark-mode .jobs-sidebar {
      background: rgba(28, 28, 30, 0.95);
      border-right-color: #38383A;
    }
    
    .jobs-sidebar-section {
      margin-bottom: var(--jobs-spacing-xl);
    }
    
    .jobs-sidebar-title {
      font-size: var(--jobs-font-size-caption);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--jobs-gray);
      margin-bottom: var(--jobs-spacing-md);
    }
    
    .jobs-sidebar-item {
      display: flex;
      align-items: center;
      gap: var(--jobs-spacing-sm);
      padding: var(--jobs-spacing-sm) var(--jobs-spacing-md);
      border-radius: 8px;
      cursor: pointer;
      transition: all var(--jobs-duration) var(--jobs-animation);
      margin-bottom: var(--jobs-spacing-xs);
      text-decoration: none;
      color: var(--jobs-black);
    }
    
    body.dark-mode .jobs-sidebar-item {
      color: var(--jobs-white);
    }
    
    .jobs-sidebar-item:hover {
      background: rgba(0, 122, 255, 0.1);
    }
    
    .jobs-sidebar-item.active {
      background: var(--jobs-blue);
      color: var(--jobs-white);
    }
    
    .jobs-sidebar-icon {
      font-size: 16px;
    }
    
    .jobs-sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      opacity: 0;
      visibility: hidden;
      transition: all var(--jobs-duration) var(--jobs-animation);
      z-index: 998;
    }
    
    .jobs-sidebar-overlay.open {
      opacity: 1;
      visibility: visible;
    }
    
    .jobs-nav-title {
      font-size: var(--jobs-font-size-body);
      font-weight: 600;
      letter-spacing: -0.01em;
    }
    
    .jobs-nav-actions {
      display: flex;
      gap: var(--jobs-spacing-md);
      align-items: center;
    }
    
    .jobs-nav-button {
      background: none;
      border: none;
      padding: var(--jobs-spacing-xs) var(--jobs-spacing-sm);
      font-size: var(--jobs-font-size-caption);
      color: var(--jobs-blue);
      cursor: pointer;
      border-radius: 6px;
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    .jobs-nav-button:hover {
      background: rgba(0, 122, 255, 0.1);
    }
    
    /* Main Container */
    .jobs-container {
      padding-top: 48px;
      min-height: 100vh;
      padding-bottom: var(--jobs-spacing-lg);
    }
    
    /* Header */
    .jobs-header {
      text-align: center;
      padding: var(--jobs-spacing-xl) var(--jobs-spacing-lg);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .jobs-header-title {
      font-size: var(--jobs-font-size-title);
      font-weight: 600;
      letter-spacing: -0.02em;
      margin: 0 0 var(--jobs-spacing-sm) 0;
    }
    
    .jobs-header-subtitle {
      font-size: var(--jobs-font-size-body);
      color: var(--jobs-gray);
      margin: 0;
    }
    
    /* System Overview Cards */
    .jobs-overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--jobs-spacing-lg);
      padding: 0 var(--jobs-spacing-lg);
      max-width: 1200px;
      margin: 0 auto var(--jobs-spacing-xxl);
    }
    
    .jobs-overview-card {
      background: var(--jobs-white);
      border: 1px solid var(--jobs-light-gray);
      border-radius: 12px;
      padding: var(--jobs-spacing-lg);
      text-align: center;
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    .jobs-overview-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }
    
    .jobs-overview-value {
      font-size: var(--jobs-font-size-headline);
      font-weight: 600;
      margin-bottom: var(--jobs-spacing-xs);
    }
    
    .jobs-overview-label {
      font-size: var(--jobs-font-size-caption);
      color: var(--jobs-gray);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .jobs-overview-value.online {
      color: var(--jobs-green);
    }
    
    .jobs-overview-value.warning {
      color: var(--jobs-orange);
    }
    
    .jobs-overview-value.error {
      color: var(--jobs-red);
    }
    
    /* System Cards Grid */
    .jobs-system-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: var(--jobs-spacing-lg);
      padding: 0 var(--jobs-spacing-lg);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .jobs-system-card {
      background: var(--jobs-white);
      border: 1px solid var(--jobs-light-gray);
      border-radius: 12px;
      padding: var(--jobs-spacing-lg);
      transition: all var(--jobs-duration) var(--jobs-animation);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .jobs-system-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .jobs-system-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--jobs-spacing-md);
    }
    
    .jobs-system-title {
      font-size: var(--jobs-font-size-body);
      font-weight: 600;
      margin: 0;
    }
    
    .jobs-status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--jobs-gray);
      position: relative;
    }
    
    .jobs-status-indicator.online {
      background: var(--jobs-green);
      animation: pulse 2s infinite;
    }
    
    .jobs-status-indicator.warning {
      background: var(--jobs-orange);
    }
    
    .jobs-status-indicator.error {
      background: var(--jobs-red);
      animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    
    .jobs-system-description {
      font-size: var(--jobs-font-size-caption);
      color: var(--jobs-gray);
      margin-bottom: var(--jobs-spacing-md);
      line-height: 1.4;
    }
    
    .jobs-system-metrics {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--jobs-spacing-md);
    }
    
    .jobs-metric {
      text-align: center;
    }
    
    .jobs-metric-value {
      font-size: var(--jobs-font-size-body);
      font-weight: 600;
      margin-bottom: var(--jobs-spacing-xs);
    }
    
    .jobs-metric-label {
      font-size: 11px;
      color: var(--jobs-gray);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .jobs-system-actions {
      display: flex;
      gap: var(--jobs-spacing-sm);
    }
    
    .jobs-action-button {
      flex: 1;
      background: var(--jobs-light-gray);
      border: none;
      padding: var(--jobs-spacing-sm);
      border-radius: 6px;
      font-size: var(--jobs-font-size-caption);
      font-weight: 500;
      cursor: pointer;
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    .jobs-action-button:hover {
      background: var(--jobs-blue);
      color: var(--jobs-white);
    }
    
    body.dark-mode .jobs-action-button {
      background: #2C2C2E;
      color: var(--jobs-white);
    }
    
    body.dark-mode .jobs-action-button:hover {
      background: var(--jobs-blue);
    }
    
    /* Bottom Tab Bar - Removed */
    
    /* Configuration Panel */
    .jobs-config-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-left: 1px solid rgba(0, 0, 0, 0.1);
      z-index: 2000;
      transition: right var(--jobs-duration) var(--jobs-animation);
      overflow-y: auto;
      padding: var(--jobs-spacing-lg);
    }
    
    .jobs-config-panel.open {
      right: 0;
    }
    
    body.dark-mode .jobs-config-panel {
      background: rgba(28, 28, 30, 0.95);
      border-left-color: #38383A;
    }
    
    .jobs-config-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--jobs-spacing-lg);
      padding-bottom: var(--jobs-spacing-md);
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    body.dark-mode .jobs-config-header {
      border-bottom-color: #38383A;
    }
    
    .jobs-config-title {
      font-size: var(--jobs-font-size-body);
      font-weight: 600;
      margin: 0;
    }
    
    .jobs-config-close {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: var(--jobs-gray);
      padding: var(--jobs-spacing-xs);
      border-radius: 4px;
      transition: all var(--jobs-duration) var(--jobs-animation);
    }
    
    .jobs-config-close:hover {
      background: rgba(0, 0, 0, 0.1);
    }
    
    body.dark-mode .jobs-config-close:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .jobs-system-grid {
        grid-template-columns: 1fr;
        gap: var(--jobs-spacing-md);
      }
      
      .jobs-overview-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .jobs-config-panel {
        width: 100%;
        right: -100%;
      }
    }
  </style>
</head>
<body class="dark-mode">
  <!-- Navigation with Hamburger -->
  <nav class="jobs-nav">
    <div style="display: flex; align-items: center; gap: var(--jobs-spacing-md);">
      <button class="jobs-hamburger" onclick="toggleSidebar()" id="hamburger-btn">
        <div class="jobs-hamburger-line"></div>
        <div class="jobs-hamburger-line"></div>
        <div class="jobs-hamburger-line"></div>
      </button>
      <div class="jobs-nav-title">FinSight Intelligence</div>
    </div>
    <div class="jobs-nav-actions">
      <button class="jobs-nav-button" onclick="toggleDarkMode()">◐</button>
    </div>
  </nav>
  
  <!-- Sidebar Overlay -->
  <div class="jobs-sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
  
  <!-- Sidebar -->
  <div class="jobs-sidebar" id="sidebar">
    <div class="jobs-sidebar-section">
      <div class="jobs-sidebar-title">FinSight Intelligence</div>
      <a href="/index.html" class="jobs-sidebar-item">
        <div class="jobs-sidebar-icon">◉</div>
        <span>Today</span>
      </a>
      <a href="/analyze-jobs.html" class="jobs-sidebar-item">
        <div class="jobs-sidebar-icon">◎</div>
        <span>Analyze</span>
      </a>
      <a href="/model-jobs.html" class="jobs-sidebar-item">
        <div class="jobs-sidebar-icon">◆</div>
        <span>Model</span>
      </a>
      <a href="/teach-jobs.html" class="jobs-sidebar-item">
        <div class="jobs-sidebar-icon">◇</div>
        <span>Teach</span>
      </a>
      <a href="/ai-jobs.html" class="jobs-sidebar-item">
        <div class="jobs-sidebar-icon">◈</div>
        <span>AI</span>
      </a>
      <a href="/control-jobs.html" class="jobs-sidebar-item active" id="control-menu" style="display: none;">
        <div class="jobs-sidebar-icon">⚙️</div>
        <span>Control</span>
      </a>
    </div>
  </div>
  
  <!-- Main Container -->
  <div class="jobs-container">
    <!-- Header -->
    <div class="jobs-header">
      <h1 class="jobs-header-title">System Control</h1>
      <p class="jobs-header-subtitle">Monitor and manage all FinSight systems</p>
    </div>
    
    <!-- System Overview -->
    <div class="jobs-overview-grid">
      <div class="jobs-overview-card">
        <div class="jobs-overview-value online" id="system-health">Healthy</div>
        <div class="jobs-overview-label">System Status</div>
      </div>
      
      <div class="jobs-overview-card">
        <div class="jobs-overview-value" id="function-count">28/32</div>
        <div class="jobs-overview-label">Functions Online</div>
      </div>
      
      <div class="jobs-overview-card">
        <div class="jobs-overview-value" id="active-connections">847</div>
        <div class="jobs-overview-label">Active Connections</div>
      </div>
      
      <div class="jobs-overview-card">
        <div class="jobs-overview-value" id="data-throughput">2.3 GB/s</div>
        <div class="jobs-overview-label">Data Throughput</div>
      </div>
    </div>
    
    <!-- System Cards -->
    <div class="jobs-system-grid">
      <!-- Command Centre -->
      <div class="jobs-system-card" onclick="openConfig('command-centre')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Command Centre</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Central hub for system monitoring and control operations
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">18</div>
            <div class="jobs-metric-label">Active Tasks</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">99.8%</div>
            <div class="jobs-metric-label">Uptime</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">2.1s</div>
            <div class="jobs-metric-label">Avg Response</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('command-centre', 'restart')">Restart</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('command-centre', 'logs')">View Logs</button>
        </div>
      </div>
      
      <!-- Calculation Manager -->
      <div class="jobs-system-card" onclick="openConfig('calculation-manager')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Calculation Manager</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Manages financial calculations and risk computation engines
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">1.2M</div>
            <div class="jobs-metric-label">Calculations/hr</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">12</div>
            <div class="jobs-metric-label">Queue Length</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">0.3s</div>
            <div class="jobs-metric-label">Avg Latency</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('calculation-manager', 'optimize')">Optimize</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('calculation-manager', 'test')">Test</button>
        </div>
      </div>
      
      <!-- ML Models -->
      <div class="jobs-system-card" onclick="openConfig('ml-models')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">ML Models</h3>
          <div class="jobs-status-indicator warning"></div>
        </div>
        <div class="jobs-system-description">
          Machine learning models for prediction and anomaly detection
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">7/8</div>
            <div class="jobs-metric-label">Models Active</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">94.2%</div>
            <div class="jobs-metric-label">Accuracy</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">6h</div>
            <div class="jobs-metric-label">Last Training</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('ml-models', 'retrain')">Retrain</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('ml-models', 'deploy')">Deploy</button>
        </div>
      </div>
      
      <!-- Calculations Config -->
      <div class="jobs-system-card" onclick="openConfig('calculations')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Calculations Engine</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Configuration and management of financial calculation formulas
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">247</div>
            <div class="jobs-metric-label">Active Formulas</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">99.9%</div>
            <div class="jobs-metric-label">Success Rate</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">0.1s</div>
            <div class="jobs-metric-label">Avg Exec Time</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('calculations', 'validate')">Validate</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('calculations', 'backup')">Backup</button>
        </div>
      </div>
      
      <!-- Market Data Config -->
      <div class="jobs-system-card" onclick="openConfig('market-data')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Market Data</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Real-time market data feeds and news processing systems
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">15</div>
            <div class="jobs-metric-label">Data Sources</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">99.5%</div>
            <div class="jobs-metric-label">Data Quality</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">0.8s</div>
            <div class="jobs-metric-label">Latency</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('market-data', 'refresh')">Refresh</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('market-data', 'sources')">Sources</button>
        </div>
      </div>
      
      <!-- Deployment System -->
      <div class="jobs-system-card" onclick="openConfig('deployment')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Deployment</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Continuous deployment and infrastructure management
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">4</div>
            <div class="jobs-metric-label">Environments</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">v2.1.3</div>
            <div class="jobs-metric-label">Current Version</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">2h</div>
            <div class="jobs-metric-label">Last Deploy</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('deployment', 'deploy')">Deploy</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('deployment', 'rollback')">Rollback</button>
        </div>
      </div>
      
      <!-- System Configuration -->
      <div class="jobs-system-card" onclick="openConfig('system-config')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">System Config</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Core system configuration and environment settings
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">127</div>
            <div class="jobs-metric-label">Config Items</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">5</div>
            <div class="jobs-metric-label">Pending Changes</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-label">Last Update</div>
            <div class="jobs-metric-value">3m</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('system-config', 'apply')">Apply</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('system-config', 'backup')">Backup</button>
        </div>
      </div>
      
      <!-- Data Management -->
      <div class="jobs-system-card" onclick="openConfig('data-management')">
        <div class="jobs-system-header">
          <h3 class="jobs-system-title">Data Management</h3>
          <div class="jobs-status-indicator online"></div>
        </div>
        <div class="jobs-system-description">
          Database management, backups, and data pipeline monitoring
        </div>
        <div class="jobs-system-metrics">
          <div class="jobs-metric">
            <div class="jobs-metric-value">2.7TB</div>
            <div class="jobs-metric-label">Data Volume</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">4</div>
            <div class="jobs-metric-label">Daily Backups</div>
          </div>
          <div class="jobs-metric">
            <div class="jobs-metric-value">99.9%</div>
            <div class="jobs-metric-label">Availability</div>
          </div>
        </div>
        <div class="jobs-system-actions">
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('data-management', 'backup')">Backup</button>
          <button class="jobs-action-button" onclick="event.stopPropagation(); quickAction('data-management', 'optimize')">Optimize</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Configuration Panel -->
  <div class="jobs-config-panel" id="config-panel">
    <div class="jobs-config-header">
      <h3 class="jobs-config-title" id="config-title">System Configuration</h3>
      <button class="jobs-config-close" onclick="closeConfig()">×</button>
    </div>
    <div id="config-content">
      <!-- Dynamic configuration content will be loaded here -->
    </div>
  </div>
  
  <script>
    // Check user role
    const userRole = localStorage.getItem('userRole') || 'Finance';
    if (userRole === 'Technology') {
      document.getElementById('control-menu').style.display = 'flex';
    }
    
    // Sidebar functionality
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      const hamburger = document.getElementById('hamburger-btn');
      
      sidebar.classList.toggle('open');
      overlay.classList.toggle('open');
      hamburger.classList.toggle('active');
    }
    
    function closeSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      const hamburger = document.getElementById('hamburger-btn');
      
      sidebar.classList.remove('open');
      overlay.classList.remove('open');
      hamburger.classList.remove('active');
    }
    
    // Close sidebar when clicking on a link
    document.querySelectorAll('.jobs-sidebar-item').forEach(item => {
      item.addEventListener('click', closeSidebar);
    });
    
    // Dark mode toggle
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    }
    
    // Load saved preferences
    if (localStorage.getItem('darkMode') === 'false') {
      document.body.classList.remove('dark-mode');
    }
    
    // Spotlight search
    function showSpotlight() {
      const query = prompt('Search system components...');
      if (query) {
        console.log('Searching for:', query);
        // In real implementation, would show search results
      }
    }
    
    // Configuration panel
    function openConfig(systemType) {
      const panel = document.getElementById('config-panel');
      const title = document.getElementById('config-title');
      const content = document.getElementById('config-content');
      
      // Set title based on system type
      const titles = {
        'command-centre': 'Command Centre Configuration',
        'calculation-manager': 'Calculation Manager Settings',
        'ml-models': 'ML Models Configuration',
        'calculations': 'Calculations Engine Setup',
        'market-data': 'Market Data Configuration',
        'deployment': 'Deployment Configuration',
        'system-config': 'System Configuration',
        'data-management': 'Data Management Settings'
      };
      
      title.textContent = titles[systemType] || 'System Configuration';
      
      // Load configuration content
      content.innerHTML = getConfigContent(systemType);
      
      // Show panel
      panel.classList.add('open');
    }
    
    function closeConfig() {
      document.getElementById('config-panel').classList.remove('open');
    }
    
    function getConfigContent(systemType) {
      const configs = {
        'command-centre': `
          <div style="margin-bottom: 20px;">
            <h4>System Monitoring</h4>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Real-time alerts
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Performance tracking
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox"> Debug mode
            </label>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Alert Thresholds</h4>
            <div style="margin-bottom: 10px;">
              <label>CPU Usage: <input type="range" min="0" max="100" value="80"> 80%</label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Memory Usage: <input type="range" min="0" max="100" value="85"> 85%</label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Response Time: <input type="range" min="0" max="5000" value="2000"> 2000ms</label>
            </div>
          </div>
        `,
        'calculation-manager': `
          <div style="margin-bottom: 20px;">
            <h4>Performance Settings</h4>
            <div style="margin-bottom: 10px;">
              <label>Max Concurrent Calculations: <input type="number" value="50" min="1" max="100"></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Timeout (seconds): <input type="number" value="30" min="1" max="300"></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Cache Size (MB): <input type="number" value="512" min="64" max="2048"></label>
            </div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Queue Management</h4>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Priority queue enabled
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Auto-scaling
            </label>
          </div>
        `,
        'ml-models': `
          <div style="margin-bottom: 20px;">
            <h4>Model Status</h4>
            <div style="margin-bottom: 10px;">Portfolio Risk Model: <span style="color: #34C759;">Online</span></div>
            <div style="margin-bottom: 10px;">Anomaly Detection: <span style="color: #34C759;">Online</span></div>
            <div style="margin-bottom: 10px;">Price Prediction: <span style="color: #FF9500;">Retraining</span></div>
            <div style="margin-bottom: 10px;">Sentiment Analysis: <span style="color: #34C759;">Online</span></div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Training Settings</h4>
            <div style="margin-bottom: 10px;">
              <label>Auto-retrain interval: <select><option>Daily</option><option>Weekly</option><option>Monthly</option></select></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Validation threshold: <input type="number" value="0.95" min="0.8" max="1.0" step="0.01"></label>
            </div>
          </div>
        `,
        'calculations': `
          <div style="margin-bottom: 20px;">
            <h4>Formula Management</h4>
            <div style="margin-bottom: 10px;">Active Formulas: 247</div>
            <div style="margin-bottom: 10px;">Pending Updates: 3</div>
            <div style="margin-bottom: 10px;">Failed Validations: 0</div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Validation Settings</h4>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Strict type checking
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Range validation
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox"> Debug logging
            </label>
          </div>
        `,
        'market-data': `
          <div style="margin-bottom: 20px;">
            <h4>Data Sources</h4>
            <div style="margin-bottom: 10px;">Bloomberg: <span style="color: #34C759;">Connected</span></div>
            <div style="margin-bottom: 10px;">Reuters: <span style="color: #34C759;">Connected</span></div>
            <div style="margin-bottom: 10px;">Yahoo Finance: <span style="color: #34C759;">Connected</span></div>
            <div style="margin-bottom: 10px;">Alpha Vantage: <span style="color: #FF9500;">Reconnecting</span></div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Update Frequency</h4>
            <div style="margin-bottom: 10px;">
              <label>Stock prices: <select><option>Real-time</option><option>1 minute</option><option>5 minutes</option></select></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>News updates: <select><option>Real-time</option><option>1 minute</option><option>5 minutes</option></select></label>
            </div>
          </div>
        `,
        'deployment': `
          <div style="margin-bottom: 20px;">
            <h4>Environment Status</h4>
            <div style="margin-bottom: 10px;">Production: <span style="color: #34C759;">v2.1.3</span></div>
            <div style="margin-bottom: 10px;">Staging: <span style="color: #FF9500;">v2.1.4-rc1</span></div>
            <div style="margin-bottom: 10px;">Development: <span style="color: #007AFF;">v2.2.0-dev</span></div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Deployment Settings</h4>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Auto-deploy to staging
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox"> Auto-deploy to production
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Run tests before deploy
            </label>
          </div>
        `,
        'system-config': `
          <div style="margin-bottom: 20px;">
            <h4>System Parameters</h4>
            <div style="margin-bottom: 10px;">
              <label>Max connections: <input type="number" value="1000" min="100" max="10000"></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Session timeout: <input type="number" value="30" min="5" max="120"> minutes</label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Log level: <select><option>ERROR</option><option>WARN</option><option>INFO</option><option>DEBUG</option></select></label>
            </div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Security</h4>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Two-factor authentication
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> IP whitelisting
            </label>
            <label style="display: block; margin-bottom: 8px;">
              <input type="checkbox" checked> Audit logging
            </label>
          </div>
        `,
        'data-management': `
          <div style="margin-bottom: 20px;">
            <h4>Database Status</h4>
            <div style="margin-bottom: 10px;">Primary DB: <span style="color: #34C759;">Online</span></div>
            <div style="margin-bottom: 10px;">Replica 1: <span style="color: #34C759;">Online</span></div>
            <div style="margin-bottom: 10px;">Replica 2: <span style="color: #34C759;">Online</span></div>
            <div style="margin-bottom: 10px;">Backup Storage: <span style="color: #34C759;">Available</span></div>
          </div>
          <div style="margin-bottom: 20px;">
            <h4>Backup Settings</h4>
            <div style="margin-bottom: 10px;">
              <label>Full backup: <select><option>Daily</option><option>Weekly</option><option>Monthly</option></select></label>
            </div>
            <div style="margin-bottom: 10px;">
              <label>Retention period: <input type="number" value="90" min="1" max="365"> days</label>
            </div>
          </div>
        `
      };
      
      return configs[systemType] || '<p>Configuration options will be loaded here.</p>';
    }
    
    // Quick actions
    function quickAction(system, action) {
      const actions = {
        'command-centre': {
          'restart': 'Restarting Command Centre...',
          'logs': 'Opening system logs...'
        },
        'calculation-manager': {
          'optimize': 'Optimizing calculation engine...',
          'test': 'Running calculation tests...'
        },
        'ml-models': {
          'retrain': 'Starting model retraining...',
          'deploy': 'Deploying updated models...'
        },
        'calculations': {
          'validate': 'Validating all formulas...',
          'backup': 'Creating formula backup...'
        },
        'market-data': {
          'refresh': 'Refreshing market data...',
          'sources': 'Checking data sources...'
        },
        'deployment': {
          'deploy': 'Deploying latest version...',
          'rollback': 'Rolling back to previous version...'
        },
        'system-config': {
          'apply': 'Applying configuration changes...',
          'backup': 'Creating configuration backup...'
        },
        'data-management': {
          'backup': 'Starting database backup...',
          'optimize': 'Optimizing database performance...'
        }
      };
      
      const message = actions[system]?.[action] || 'Executing action...';
      console.log(message);
      
      // Simulate action with feedback
      const originalText = event.target.textContent;
      event.target.textContent = 'Working...';
      event.target.disabled = true;
      
      setTimeout(() => {
        event.target.textContent = originalText;
        event.target.disabled = false;
        console.log('Action completed successfully');
      }, 2000);
    }
    
    
    // Auto-refresh system metrics
    function refreshMetrics() {
      // Simulate metric updates
      const metrics = {
        'function-count': Math.floor(Math.random() * 4) + 28,
        'active-connections': Math.floor(Math.random() * 100) + 800,
        'data-throughput': (Math.random() * 0.5 + 2.0).toFixed(1)
      };
      
      Object.entries(metrics).forEach(([id, value]) => {
        const element = document.getElementById(id);
        if (element) {
          element.textContent = typeof value === 'string' ? value + ' GB/s' : value;
        }
      });
    }
    
    // Refresh metrics every 30 seconds
    setInterval(refreshMetrics, 30000);
    
    // Close config panel when clicking outside
    document.addEventListener('click', (e) => {
      const panel = document.getElementById('config-panel');
      if (!panel.contains(e.target) && !e.target.closest('.jobs-system-card')) {
        closeConfig();
      }
    });
    
    // Add keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeConfig();
      }
      if (e.metaKey && e.key === 'k') {
        e.preventDefault();
        showSpotlight();
      }
    });
  </script>
</body>
</html>